<NAME>
add_long_range_connectors_pass
</NAME>

<DESCRIPTION>
We insert a Stage 1.5 pass immediately after the KT spine to add long-range connector intervals at fixed fractional offsets (25%–75%, 0%–75%, 25%–100%, 50%–100%). These wide connectors overlap most of the existing blocks, boosting FirstFit pressure without increasing the clique number. The pass is capacity-aware so it never exceeds the CAP limit, and runs before the existing Micro-phase A.
</DESCRIPTION>

<DIFF>
<<<<<<< SEARCH
  if len(T) >= CAP - 8:
    return T

  # Micro-phase A: insert a tiny tail of long caps near the end to boost FF mixing.
=======
  if len(T) >= CAP - 8:
    return T

  # Stage 1.5: dedicated long-range connector augmentation pass
  lo, hi, delta = _span_delta(T)
  long_connectors = [
    (lo + int(round(0.25 * delta)), lo + int(round(0.75 * delta))),
    (lo,               lo + int(round(0.75 * delta))),
    (lo + int(round(0.25 * delta)), lo + delta),
    (lo + int(round(0.50 * delta)), lo + delta),
  ]
  for conn in long_connectors:
    if len(T) >= CAP:
      break
    T.append(conn)

  # Micro-phase A: insert a tiny tail of long caps near the end to boost FF mixing.
>>>>>>> REPLACE
</DIFF>